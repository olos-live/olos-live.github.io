<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.24.2">
    <meta name="project" content="AgentHub Client v0.0.30">

    <title>AgentHub Client — AgentHub Client v0.0.30</title>
    <link rel="stylesheet" href="dist/elixir-a172fe91e725dcb259e2.css" />

    <script src="dist/sidebar_items-9a3ac37ff3.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/app-f27ff079945e43879c46.js"></script>


  </head>
  <body data-type="extras">
    <script>

      try {
        if (localStorage.getItem('night-mode') === 'true') {
          document.body.classList.add('night-mode');
        }
      } catch (error) { }
    </script>

<div class="main">

<button class="sidebar-button sidebar-toggle">
  <span class="icon-menu" title="Collapse/expand sidebar"></span>
</button>

<section class="sidebar">
  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <span class="icon-search" aria-hidden="true" title="Submit search"></span>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <span class="icon-cross" aria-hidden="true" title="Cancel search"></span>
    </button>
    <label class="search-label">
      <input name="q" type="text" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">
    <div class="sidebar-projectDetails">
      <a href="https://olos-live.github.io/agenthub-client" class="sidebar-projectName">
AgentHub Client
      </a>
      <strong class="sidebar-projectVersion">
        v0.0.30
      </strong>
    </div>

  </div>

  <ul class="sidebar-listNav">
    <li><a id="extras-list-link" href="#full-list">Pages</a></li>

      <li><a id="modules-list-link" href="#full-list">Modules</a></li>


  </ul>
  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <div class="content-outer">
    <div id="content" class="content-inner">

<h1>AgentHub Client</h1><p>The <a href="AgentHubClient.html"><code class="inline">AgentHubClient</code></a> module can be used by any Elixir-based application to access the
functionalities provided by the AgentHub application, like providing the state of the
agents that are logged in, sending text messages to an agent, etc. The full 
documentation of the API will be provided as the project evolves, as they are not
well defined for now.</p><h2 id="how-to-use-it" class="section-heading">
  <a href="#how-to-use-it" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  How to use it
</h2>
<ol><li>Add it as a dependency in yout <code class="inline">mix.exs</code> file. You must have ssh access
to the repository in the Olos' GitLab. Example:</li></ol><pre><code class="makeup elixir"><span class="w">  </span><span class="kd">defp</span><span class="w"> </span><span class="nf">deps</span><span class="w"> </span><span class="k" data-group-id="6628055876-1">do</span><span class="w">
    </span><span class="p" data-group-id="6628055876-2">[</span><span class="w">
      </span><span class="p" data-group-id="6628055876-3">{</span><span class="ss">:agenthub_client</span><span class="p">,</span><span class="w"> </span><span class="ss">git</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;git@olosprdspogit03:olos-live/agenthub-client.git&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;latest&quot;</span><span class="p" data-group-id="6628055876-3">}</span><span class="w">
    </span><span class="p" data-group-id="6628055876-2">]</span><span class="w">
  </span><span class="k" data-group-id="6628055876-1">end</span></code></pre><ol start="2"><li>Add it to your supervision tree (usually in <code class="inline">application.ex</code>). Example:</li></ol><pre><code class="makeup elixir"><span class="w">  </span><span class="n">children</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="5945224881-1">[</span><span class="w">
    </span><span class="p" data-group-id="5945224881-2">{</span><span class="nc">AgentHubClient.Supervisor</span><span class="p">,</span><span class="w"> </span><span class="ss">replication</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="5945224881-2">}</span><span class="w">
  </span><span class="p" data-group-id="5945224881-1">]</span><span class="w">
  </span><span class="nc">Supervisor</span><span class="o">.</span><span class="n">start_link</span><span class="p" data-group-id="5945224881-3">(</span><span class="n">children</span><span class="p">,</span><span class="w"> </span><span class="ss">strategy</span><span class="p">:</span><span class="w"> </span><span class="ss">:one_for_one</span><span class="p" data-group-id="5945224881-3">)</span></code></pre><ol start="3"><li>Then you can invoke functions provided by the <a href="AgentHubClient.html"><code class="inline">AgentHubClient</code></a> module. Example:</li></ol><pre><code class="makeup elixir"><span class="w">  </span><span class="kd">def</span><span class="w"> </span><span class="nf">some_dialer_function</span><span class="w"> </span><span class="k" data-group-id="5039592471-1">do</span><span class="w">
    </span><span class="n">agents</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">AgentHubClient</span><span class="o">.</span><span class="n">get_all_agents</span><span class="p" data-group-id="5039592471-2">(</span><span class="s">&quot;atento&quot;</span><span class="p" data-group-id="5039592471-2">)</span><span class="w">
    </span><span class="c1"># do something with the agents</span><span class="w">
  </span><span class="k" data-group-id="5039592471-1">end</span></code></pre><h2 id="configuration" class="section-heading">
  <a href="#configuration" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Configuration
</h2>
<p>Currently the only option you have when starting this module is the <code class="inline">replication</code>.
The default value is <code class="inline">false</code>. If you set it to <code class="inline">true</code> then the client will keep in
its memory a local copy of the agents state table, which improves the performance of
reads at the expenses of the performance of writes. </p><h2 id="starting-your-application" class="section-heading">
  <a href="#starting-your-application" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Starting your application
</h2>
<p>If you simply start your application like you usually do, without a name, you will be
starting with an empty local in-memory store, with no agents logged in:</p><pre><code class="bash">iex -S mix</code></pre><p>In this case you can call the <code class="inline">logged_in/2</code> function multiple times in your tests to
to add some agents to the list so you can test your business logic. In future releases
we might provide a function to automatically generate mock data for you, to ease this process.</p><p>If you want your application to access data from an actual instance of the AgentHub that 
is running in your laptop, start your application with a name. Example:</p><pre><code class="bash">iex --name dialer@127.0.0.1 -S mix</code></pre><p>It will automatically connect to one or more instances of AgentHub under the names of
<code class="inline">agenthub1@127.0.0.1</code> and <code class="inline">agenthub2@127.0.0.1</code>.</p><p>If they are not running, your application will start like in the first case, i.e., with an empty list of
agents, with some warnings about not being able to connect to those nodes. You can safely ignore them.</p><h2 id="using-an-specific-version" class="section-heading">
  <a href="#using-an-specific-version" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Using an specific version
</h2>
<p>If instead of the latest version of this module you want your application to use an specific version,
simply change the value of the <code class="inline">tag</code> in your <code class="inline">mix.exs</code> file from <code class="inline">latest</code> to the actual version,
e.g., <code class="inline">v1.2.3</code>.</p><h2 id="using-it-in-production" class="section-heading">
  <a href="#using-it-in-production" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Using it in production
</h2>
<p>In production, you will be starting your application with an actual IP address instead of <code class="inline">127.0.0.1</code>.
In that case, this module will automatically try to connect to the applications that you inform
in the environment variable named <code class="inline">AGENTHUB_CLIENT_SERVICES</code>. Example:</p><pre><code class="bash">AGENTHUB_CLIENT_SERVICES=agenthub, dialer, linker</code></pre><p>The application names are actually kubernetes services names. If you do not set this environment
variable, it is assumed <code class="inline">agenthub</code>.</p><h2 id="todo" class="section-heading">
  <a href="#todo" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  TODO
</h2>
<ul><li><p>Currently, if you want to work with data from AgentHub then your application must start
<strong>after</strong> the AgentHub, otherwise it will start with an empty state and won't keep trying
to connect or reconnect.</p></li><li><p>Add validation to the init options.</p></li><li><p>Document and publish the public API.</p></li></ul><h2 id="contributing" class="section-heading">
  <a href="#contributing" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Contributing
</h2>
<p>(WIP)</p><p>Before publishing this library, please remember to:</p><ul><li>Run <a href="https://hexdocs.pm/mix/Mix.Tasks.Test.html"><code class="inline">mix test</code></a> to make sure tests are still passing</li><li>Update or create more tests if applicable</li><li>Increment the version in <code class="inline">mix.exs</code></li><li>Commit and push to the repo</li><li>Move the <code class="inline">latest</code> tag to the new commit</li></ul>
<div class="bottom-actions">
  <div class="bottom-actions-item">

      <a href="api-reference.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
API Reference
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

  </div>
</div>

      <footer class="footer">
        <p>
          <span class="line">
            Built using
            <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener">ExDoc</a> (v0.24.2) for the
            <a href="https://elixir-lang.org" title="Elixir" target="_blank">Elixir programming language</a>.
          </span>
          <span class="line">
            Designed by
            <a href="https://twitter.com/dignifiedquire" target="_blank" rel="noopener" title="@dignifiedquire">Friedel Ziegelmayer</a>.
          </span>
        </p>
        <p>

            <a href="api-reference.html" title="API reference" class="line footer-button">API Reference</a>

          <button class="line footer-button display-shortcuts-help">
            Display keyboard shortcuts
          </button>
          <button class="line footer-button night-mode-toggle">
            Toggle night mode
          </button>
          <button class="line footer-button display-quick-switch">
            Go to a HexDocs package
          </button>
          <button class="line footer-button tooltips-toggle">
            <span class="tooltips-option-disable">Disable tooltips</span>
            <span class="tooltips-option-enable">Enable tooltips</span>
          </button>
        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
